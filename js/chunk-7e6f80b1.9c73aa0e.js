(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6f80b1"],{1799:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link  text-dark",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updatePage(t.pages.current_page-1)}}},[t._v("Previous")])]),t._l(t.pages.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pages.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.updatePage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link text-dark",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.updatePage(t.pages.current_page+1)}}},[t._v("Next")])])],2)])])},n=[],s={name:"Pagination",props:["pages"],data:function(){return{}},methods:{updatePage:function(t){this.$emit("update",t)}}},i=s,l=a("2877"),d=Object(l["a"])(i,o,n,!1,null,null,null);e["a"]=d.exports},"8c58":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openCouponModal("new")}}},[t._v(" 建立新的優惠券 ")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.coupons,(function(e,o){return a("tr",{key:o},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.code))]),a("td",[t._v("打"+t._s(e.percent/10)+"折")]),a("td",[t._v(t._s(e.deadline.datetime))]),a("td",[e.enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{disabled:t.loadingBtn==e.id},on:{click:function(a){return t.openCouponModal("edit",e)}}},[t.loadingBtn==e.id?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{disabled:t.loadingBtn==e.id},on:{click:function(a){return t.openCouponModal("delete",e)}}},[t.loadingBtn==e.id?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" 刪除 ")])])])])})),0)]),a("Pagination",{attrs:{pages:t.pagination},on:{update:t.getCoupons}}),a("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("CouponsModal",{attrs:{"temp-coupon":t.tempCoupon,"is-new":t.adjustment},on:{update:t.getCoupons}})],1),a("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("DeleteCouponsModal",{attrs:{"del-coupon":t.tempCoupon},on:{update:t.getCoupons}})],1)],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"120"}},[t._v(" 名稱 ")]),a("th",{attrs:{width:"120"}},[t._v(" 折扣碼 ")]),a("th",[t._v(" 折扣 ")]),a("th",{attrs:{width:"120"}},[t._v(" 到期日 ")]),a("th",[t._v(" 是否啟用 ")]),a("th",{attrs:{width:"180"}},[t._v(" 編輯 ")])])])}],s=(a("99af"),a("1799")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-dialog modal-l"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group text-left"},[a("label",{attrs:{for:"title"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 text-left"},[a("label",{attrs:{for:"code"}},[t._v("序號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入序號"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 text-left"},[a("label",{attrs:{for:"percent"}},[t._v("折扣")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 text-left"},[a("label",{attrs:{for:"deadline_at"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.duedate,expression:"duedate"}],staticClass:"form-control",attrs:{type:"date",id:"deadline_at",placeholder:"請輸入到期日"},domProps:{value:t.duedate},on:{input:function(e){e.target.composing||(t.duedate=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 text-left"},[a("label",{attrs:{for:"deadline_at"}},[t._v("到期時間")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.duetime,expression:"duetime"}],staticClass:"form-control",attrs:{type:"time",id:"deadline_at",placeholder:"請輸入到期日",step:"1"},domProps:{value:t.duetime},on:{input:function(e){e.target.composing||(t.duetime=e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.enabled,expression:"tempCoupon.enabled"}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox",true:1,false:0},domProps:{checked:Array.isArray(t.tempCoupon.enabled)?t._i(t.tempCoupon.enabled,null)>-1:t.tempCoupon.enabled},on:{change:function(e){var a=t.tempCoupon.enabled,o=e.target,n=!!o.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);o.checked?i<0&&t.$set(t.tempCoupon,"enabled",a.concat([s])):i>-1&&t.$set(t.tempCoupon,"enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempCoupon,"enabled",n)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("新增產品")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],d={props:["tempCoupon","isNew"],data:function(){return{duedate:"",duetime:""}},methods:{updateCoupon:function(){var t=this;if("edit"===this.isNew){var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupon/").concat(this.tempCoupon.id);this.$http.patch(e,this.tempCoupon).then((function(e){t.$emit("update")}))}else if("new"===this.isNew){var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupon");this.tempCoupon.deadline_at="".concat(this.duedate," ").concat(this.duetime),console.log(this.tempCoupon.deadline_at),this.$http.post(a,this.tempCoupon).then((function(e){t.$emit("update")}))}}}},c=d,r=a("2877"),p=Object(r["a"])(c,i,l,!1,null,null,null),u=p.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(0),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.delCoupon.title))]),t._v(" 優惠券(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCoupon}},[t._v(" 確認刪除 ")])])])])])},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],h={props:["delCoupon"],data:function(){return{}},methods:{deleteCoupon:function(){var t="".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupon/").concat(this.delCoupon.id);this.$http.delete(t).then(),this.$emit("update")}}},C=h,g=Object(r["a"])(C,m,v,!1,null,null,null),f=g.exports,b=a("1157"),_=a.n(b),x=_.a,w={data:function(){return{isLoading:!1,coupons:[],pagination:{},tempCoupon:{},adjustment:"",loadingBtn:""}},components:{Pagination:s["a"],CouponsModal:u,DeleteCouponsModal:f},methods:{openCouponModal:function(t,e){var a=this;switch(t){case"new":this.adjustment="new",this.tempCoupon={},x("#couponModal").modal("show");break;case"edit":this.adjustment="edit",this.loadingBtn=e.id,this.$http.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupon/").concat(e.id)).then((function(t){a.tempCoupon=t.data.data,x("#couponModal").modal("show"),a.loadingBtn=""}));break;case"delete":this.loadingBtn=e.id,this.$http.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupon/").concat(e.id)).then((function(t){a.tempCoupon=t.data.data,x("#delCouponModal").modal("show"),a.loadingBtn=""}));break;default:break}},getCoupons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("71a05497-9279-4af4-a348-48c8c33eca99","/admin/ec/coupons?page=").concat(e);this.$http.get(a).then((function(e){console.log(e),t.coupons=e.data.data,t.pagination=e.data.meta.pagination,t.tempCoupon.id?(t.tempCoupon={},x("#couponModal").modal("hide"),x("#delCouponModal").modal("hide"),t.isLoading=!1):(t.tempCoupon={},x("#couponModal").modal("hide"),t.isLoading=!1)}))}},created:function(){this.getCoupons()}},k=w,y=Object(r["a"])(k,o,n,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-7e6f80b1.9c73aa0e.js.map